<%- include("./partials/header") %>
<div class="ui container">
  <h2>This is API-AJAX TESTING PAGE</h2>
  <br>
  <button class="ui button" type="button" onclick="ajaxGet()">Push ME HARD Master</button>
  <div id="getResultDiv">
      <ul class="list-group">
    </ul>
  </div>
  <div id="fuzzy-name">
    <div class="ui form">
      <input id="HOSPITAL_NAME" type="text" class="ui input">
    </div>
  </div>
  <button class="ui button" type="button" onclick="locationGet()">Search</button>
  <div id="getResultDiv2">
    <ul class="list-group">
  </ul>
</div>
</div>


<script src="design.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha256-t8GepnyPmw9t+foMh3mKNvcorqNHamSKtKRxxpUEgFI=" crossorigin="anonymous"></script>
<script>

  //LOCATION GET

  
  function locationGet(){
    var search_query = {
      HOSPITAL_NAME : $("#HOSPITAL_NAME").val(),
      STATE_NAME : "",
      COUNTY_NAME : "",
      HQ_CITY : "",
    }
    $.ajax({
      type : "GET",
      contentType: "application/json",
      url : "/api/fuzzy",
      data : search_query,
      dataType:"json",
      success: function(result){
        $('#getResultDiv2 ul').empty();
        $.each(result, function(i, hospital){
          $('#getResultDiv2 .list-group').append("HOSPITAL NAME - "+hospital.HOSPITAL_NAME + " FID KEY- " + hospital.FID + "<br>")
        });
        console.log("Success: ", result);
      },
      error : function(e) {
        $("#getResultDiv2").html("<strong>Error</strong>");
        console.log("ERROR: ", e);
      }
    });  
  }

  // DO GET
  function ajaxGet(){
    $.ajax({
      type : "GET",
      url : "/api/getdata",
      success: function(result){
        $('#getResultDiv ul').empty();
        $.each(result, function(i, hospital){
          $('#getResultDiv .list-group').append("County Name - "+hospital.COUNTY_NAME + "<br>" + " FID KEY- " + hospital.FID + "<br>")
        });
        console.log("Success: ", result);
      },
      error : function(e) {
        $("#getResultDiv").html("<strong>Error</strong>");
        console.log("ERROR: ", e);
      }
    });  
  }

</script>
</body>
</html>
