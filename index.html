<!DOCTYPE html>
<htmml lang= "en">
    <head>
        <title>
        Here Maps : BITSians
        </title>
        <meta name="viewport" charset="utf-8" content="initial-scale=1.0, width=sevice-width" />
        <script src="creds.js"></script>
        <script src="https://js.api.here.com/v3/3.1/mapsjs-core.js" type="text/javascript"></script>
        <script src="https://js.api.here.com/v3/3.1/mapsjs-service.js" type="text/javascript"></script>
        <script src="https://js.api.here.com/v3/3.1/mapsjs-ui.js" type="text/javascript"></script>
        <script src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />
    </head>
    <body>
        <div id="mapContainer" style="width: 100vw; height: 80vh; align-self: center; background-color: aqua;"></div>
    </body>
    <script>
        var platform = new H.service.Platform({
        'apikey': window.hereCreds.JSKEY
        });
        var myPos = {lat:18.52571, lng:74.09815};
        
        // Obtain the default map types from the platform object:
        var defaultLayers = platform.createDefaultLayers();

        // Instantiate (and display) a map object:
        var map = new H.Map(
            document.getElementById('mapContainer'),
            defaultLayers.vector.normal.map,
        {
            zoom: 10,
            center: { lat: 18.52571, lng: 74.09815 }
        });

        // Create the default UI:
        var ui = H.ui.UI.createDefault(map, defaultLayers,'en-US');
        ui.getControl('mapsettings').setDisabled(false)
        ui.getControl('zoom').setDisabled(false)
        ui.getControl('scalebar').setDisabled(false)

        // Positions of the UI components:
        var mapSettings = ui.getControl('mapsettings');
        var scalebar = ui.getControl('scalebar');
        mapSettings.setAlignment('top-left');
        scalebar.setAlignment('bottom-right');

        // Create an info bubble object at a specific geographic location:
        var bubble = new H.ui.InfoBubble({ lng: 18.52571, lat: 74.09815 }, {
                content: '<b>Pune</b>'
        });

        // Add info bubble to the UI:
        ui.addBubble(bubble);

        // Enable the event system on the map instance:
        var mapEvents = new H.mapevents.MapEvents(map);
        var behavior = new H.mapevents.Behavior(mapEvents);

        map.getViewModel().setLookAtData({
           tilt: 45
        });
        
        function getBrowserPosition(){
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    console.log(position.coords);
                    let browserPosition = {lat: position.coords.latitude , lng: position.coords.longitude };
                    // Create a marker:
                    let marker = new H.map.Marker(browserPosition);
                    map.addObject(marker);

                });
            } else {
                alert("Geolocation is not supported by this browser!");
            }
        }

        getBrowserPosition();

        // Add event listener:
        map.addEventListener('tap', function(evt) {
            // Log 'tap' and 'mouse' events:
            console.log(evt);
            let pointer = evt.currentPointer;
            console.log(map.screenToGeo(pointer.viewportX, pointer.viewportY));
        });

        
    </script>
</htmml>